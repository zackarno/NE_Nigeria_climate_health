library(rgee)
library(sf)
library(tidyverse)

ee_Initialize()
getwd()

adm3 <- structure(list(Shape_Leng = 0.494867106799, Shape_Area = 0.00825418024991, 
               ADM3_EN = "Alau", ADM3_PCODE = "NG008013001", ADM3_REF = "Alau", 
               ADM3ALT1EN = "Alau", ADM3ALT2EN = NA_character_, ADM2_EN = "Jere", 
               ADM2_PCODE = "NG008013", ADM1_EN = "Borno", ADM1_PCODE = "NG008", 
               ADM0_EN = "Nigeria", ADM0_PCODE = "NG", date = structure(17256, class = "Date"), 
               validOn = structure(18003, class = "Date"), validTo = structure(NA_real_, class = "Date"), 
               SD_EN = "Borno Central", SD_PCODE = "NG00801", geometry = structure(list(
                 structure(list(list(structure(c(13.22802469, 13.230820115, 
                                                 13.2363006190001, 13.2420994930001, 13.2450304170001, 
                                                 13.2512301940001, 13.2552799590001, 13.2604401890001, 
                                                 13.2648899920001, 13.2693396170001, 13.273390152, 13.278149925, 
                                                 13.2814102140001, 13.285820083, 13.2869002850001, 13.287754223, 
                                                 13.288166889, 13.288279548, 13.289773097, 13.289910686, 
                                                 13.289439628, 13.2874498480001, 13.2858603280001, 13.2824500240001, 
                                                 13.2796843740001, 13.2782405090001, 13.2722101570001, 
                                                 13.266959737, 13.262119749, 13.257280918, 13.2535399380001, 
                                                 13.246079884, 13.2401200640001, 13.234169513, 13.2293191370001, 
                                                 13.221946406, 13.221737121, 13.2216220770001, 13.221352327, 
                                                 13.2189192450001, 13.214469928, 13.2115300720001, 13.207159867, 
                                                 13.2050199120001, 13.2051001090001, 13.205569961, 13.204540675, 
                                                 13.200570053, 13.1966004510001, 13.192940246, 13.1855603860001, 
                                                 13.175869673, 13.169510114, 13.163879797, 13.1604608170001, 
                                                 13.155929889, 13.1514104670001, 13.1483892540001, 13.1358409750001, 
                                                 13.132830144, 13.1267902810001, 13.1195695490001, 13.1225712020001, 
                                                 13.1497370440001, 13.1589167870001, 13.1589851370001, 
                                                 13.1682268800001, 13.192394119, 13.196296435, 13.199035673, 
                                                 13.200768253, 13.201897231, 13.2027291100001, 13.2036204090001, 
                                                 13.2048088080001, 13.2062943060001, 13.2077203850001, 
                                                 13.208492844, 13.2090276230001, 13.209205883, 13.2095624030001, 
                                                 13.209384143, 13.2099783420001, 13.211285581, 13.21182036, 
                                                 13.2123551390001, 13.2135435380001, 13.2146725170001, 
                                                 13.215801496, 13.2168116340001, 13.2181782930001, 13.22802469, 
                                                 11.782453946, 11.77805069, 11.772479746, 11.7643601780001, 
                                                 11.7621095150001, 11.7550695080001, 11.7524499890001, 
                                                 11.7494295060001, 11.747890736, 11.746340027, 11.743709558, 
                                                 11.7396097070001, 11.734820207, 11.7286394880001, 11.725946562, 
                                                 11.723091756, 11.720460869, 11.720223081, 11.7170706740001, 
                                                 11.713529371, 11.7088003710001, 11.7033797890001, 11.699040563, 
                                                 11.6965598360001, 11.6935049310001, 11.6919100550001, 
                                                 11.68910965, 11.688489674, 11.6889498090001, 11.689410422, 
                                                 11.6894798440001, 11.689629601, 11.690469513, 11.6913205160001, 
                                                 11.691780323, 11.693474479, 11.693627162, 11.6936610000001, 
                                                 11.693610983, 11.6941700240001, 11.6957099530001, 11.6979503260001, 
                                                 11.7031405320001, 11.707549994, 11.711190163, 11.715910235, 
                                                 11.719940407, 11.726209722, 11.732480126, 11.736189644, 
                                                 11.7399794840001, 11.7408999090001, 11.7406594280001, 
                                                 11.738949501, 11.736470023, 11.7343702160001, 11.7322702270001, 
                                                 11.7308795220001, 11.7205600990001, 11.719160118, 11.716369894, 
                                                 11.7103205500001, 11.7253818890001, 11.7695970120001, 
                                                 11.7659126350001, 11.765885202, 11.7604070510001, 11.781077602, 
                                                 11.7849323290001, 11.7882185870001, 11.788035231, 11.78693006, 
                                                 11.784894208, 11.783789024, 11.782334829, 11.7808806250001, 
                                                 11.780182605, 11.778961065, 11.7781467020001, 11.776983323, 
                                                 11.776052615, 11.7749473960001, 11.774016682, 11.7728532850001, 
                                                 11.771631712, 11.770991839, 11.770002941, 11.768839526, 
                                                 11.768781356, 11.7691885510001, 11.769246722, 11.782453946
                 ), .Dim = c(92L, 2L)))), class = c("XY", "MULTIPOLYGON", 
                                                    "sfg"))), class = c("sfc_MULTIPOLYGON", "sfc"), precision = 0, bbox = structure(c(xmin = 13.1195695490001, 
                                                                                                                                      ymin = 11.688489674, xmax = 13.289910686, ymax = 11.7882185870001
                                                    ), class = "bbox"), crs = structure(list(input = "WGS 84", 
                                                                                             wkt = "GEOGCRS[\"WGS 84\",\n    DATUM[\"World Geodetic System 1984\",\n        ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n            LENGTHUNIT[\"metre\",1]]],\n    PRIMEM[\"Greenwich\",0,\n        ANGLEUNIT[\"degree\",0.0174532925199433]],\n    CS[ellipsoidal,2],\n        AXIS[\"latitude\",north,\n            ORDER[1],\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        AXIS[\"longitude\",east,\n            ORDER[2],\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n    ID[\"EPSG\",4326]]"), class = "crs"), n_empty = 0L)), row.names = c(NA, 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    -1L), class = c("sf", "data.frame"), sf_column = "geometry", agr = structure(c(Shape_Leng = NA_integer_, 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   Shape_Area = NA_integer_, ADM3_EN = NA_integer_, ADM3_PCODE = NA_integer_, 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   ADM3_REF = NA_integer_, ADM3ALT1EN = NA_integer_, ADM3ALT2EN = NA_integer_, 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   ADM2_EN = NA_integer_, ADM2_PCODE = NA_integer_, ADM1_EN = NA_integer_, 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   ADM1_PCODE = NA_integer_, ADM0_EN = NA_integer_, ADM0_PCODE = NA_integer_, 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   date = NA_integer_, validOn = NA_integer_, validTo = NA_integer_, 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   SD_EN = NA_integer_, SD_PCODE = NA_integer_), class = "factor", .Label = c("constant", 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              "aggregate", "identity")))

# not sure why there is an error here
adm3_ee <- adm3 |> 
  sf_as_ee()

# however it works after calling st_geometry
adm3_ee <- adm3 |> 
  st_geometry() |>
  sf_as_ee()

# also works after just selecting 1 column
adm3_ee <- adm3 |> 
  select(ADM3_EN) |> 
  sf_as_ee()




